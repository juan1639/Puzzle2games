var t=Object.defineProperty,e=(e,s,i)=>(((e,s,i)=>{s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i})(e,"symbol"!=typeof s?s+"":s,i),i);import{p as s}from"./phaser-cxBNu8M8.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const i=class t{static getTxtScore(){return t.txtScore}static getTxtTime(){return t.txtTime}static isGameOver(){return t.gameOver}static getPuntos(){return t.puntos}static getNivel(){return t.nivel}static getRecord(){return t.hi}static getAnimations(){return t.animations}static getAudio(){return t.audio}static setGameOver(e){t.gameOver=e}static setPuntos(e){t.puntos=e}static setNivel(e){t.nivel=e}static setRecord(e){t.hi=e}static setAnimationsVel(e){t.animations.vel=e}static setAudioMusic(e){t.audio.music=e}static setAudioFireWorks(e){t.audio.fireWorks=e}};e(i,"screen",{width:1024,height:768}),e(i,"tileXY",{x:150,y:150}),e(i,"gameOver",!1),e(i,"puntos",0),e(i,"nivel",1),e(i,"hi",151),e(i,"txtScore"," Score: "),e(i,"txtTime"," Time: "),e(i,"pausas",{inicial:4e3,showBonus:3500,nivelSuperado:7e3}),e(i,"depth",{fondo:0,bloques:100,efectos:200,ui:250,marcadores:300,textos:400}),e(i,"empty",8),e(i,"array_numbers",[[i.empty,i.empty,i.empty],[i.empty,i.empty,i.empty],[i.empty,i.empty,i.empty]]),e(i,"animations",{vel:100}),e(i,"audio",{music:null,fireWorks:null});let o=i;class a{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,txt:s,size:i,color:o,style:a,stroke:r,sizeStroke:n,shadowOsx:h,shadowOsy:l,shadowColor:d,bool1:c,bool2:u,origin:g,elastic:m,dura:p}=this.datos;this.texto=this.relatedScene.add.text(t,e,s,{fontSize:i+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:a}),this.texto.setOrigin(g[0],g[1]),this.texto.setStroke(r,n),this.texto.setShadow(h,l,d,2,c,u),this.elastic(s,m,p),console.log(this.texto)}elastic(t,e,s){s>0&&this.relatedScene.tweens.add({targets:this.texto,y:e,ease:"Elastic",duration:s})}get(){return this.texto}}class r extends s.Scene{constructor(){super("Boot")}init(){this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n  click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#fa1",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/img/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("Preloader"))),console.log(this.txt)}}function n(t,e,s,i,a,r,n,h,l,d,c){const u=c.add.particles(t,e,s,{speed:i,lifespan:a,scale:r,tint:n,blendMode:"ADD"});h||c.time.delayedCall(o.pausas.inicial,(()=>u.stop())),d&&u.startFollow(l)}function h(t){let e=t.toString(),s=0,i=0;return t<10?`00:0${e}`:t>59?(s=Math.floor(t/60),i=t-60*s,i<10?s<10?`0${s}:0${i.toString()}`:`${s}:0${i.toString()}`:s<10?`0${s}:${i.toString()}`:`${s}:${i.toString()}`):`00:${e}`}function l(t,e,s){t.volume=s,t.loop=e,t.play()}class d{constructor(t,e){this.relatedScene=t,this.resolve=e}create(){this.paddingX=Math.floor(this.relatedScene.sys.game.config.width/2-o.tileXY.x*o.array_numbers[0].length/2),this.paddingY=Math.floor(this.relatedScene.sys.game.config.height/2-o.tileXY.y*o.array_numbers.length/2),this.lenArrayNumbers=o.array_numbers.length*o.array_numbers[0].length,this.drawNumbers=[],this.resolve?this.drawNumbers=[0,1,2,3,4,5,6,7]:this.set_draw(),this.puzzle_done=[],this.board=this.relatedScene.physics.add.group({key:"tiles-numbers",frame:this.drawNumbers}),Phaser.Actions.SetScale(this.board.getChildren(),o.tileXY.x/this.board.getChildren()[0].width,o.tileXY.y/this.board.getChildren()[0].height),Phaser.Actions.SetOrigin(this.board.getChildren(),0,0),Phaser.Actions.GridAlign(this.board.getChildren(),{width:o.array_numbers[0].length,height:o.array_numbers.length,cellWidth:o.tileXY.x,cellHeight:o.tileXY.y,x:this.paddingX,y:this.paddingY}),this.resolve||this.board.children.iterate(((t,e)=>{t.setInteractive(),t.on("pointerdown",(()=>{console.log("click"+t.x+t.y),this.clickHandler(t)}))})),this.sound_jump=this.relatedScene.sonido_jump,console.log(this.board)}update(){this.puzzle_done=this.check_puzzleDone()}clickHandler(t){const[e,s]=this.get_matrixIndex(t.y,t.x);this.check_neighbours(e,s,t,!0)}check_neighbours(t,e,s,i){t<2&&o.array_numbers[t+1][e]===o.empty?this.swapEmpty(t,e,1,0,s):t>0&&o.array_numbers[t-1][e]===o.empty?this.swapEmpty(t,e,-1,0,s):e<2&&o.array_numbers[t][e+1]===o.empty?this.swapEmpty(t,e,0,1,s):e>0&&o.array_numbers[t][e-1]===o.empty&&this.swapEmpty(t,e,0,-1,s)}swapEmpty(t,e,s,i,a){o.array_numbers[t+s][e+i]=o.array_numbers[t][e],o.array_numbers[t][e]=o.empty,console.log(o.array_numbers),this.relatedScene.tweens.add({targets:a,x:a.x+i*o.tileXY.x,y:a.y+s*o.tileXY.y,duration:o.animations.vel}),l(this.sound_jump,!1,.7)}get_matrixIndex(t,e){return[(t-this.paddingY)/o.tileXY.y,(e-this.paddingX)/o.tileXY.x]}set_draw(){for(let t=0;t<o.array_numbers.length;t++)for(let e=0;e<o.array_numbers[0].length;e++){if(e===o.array_numbers[0].length-1&&t===o.array_numbers.length-1)continue;let s;do{s=Phaser.Math.Between(0,this.lenArrayNumbers-2)}while(this.drawNumbers.includes(s));o.array_numbers[t][e]=s,this.drawNumbers.push(s)}console.log(o.array_numbers)}check_puzzleDone(){const t=[];let e=-1;for(let s=0;s<o.array_numbers.length;s++)for(let i=0;i<o.array_numbers[0].length;i++)i===o.array_numbers[0].length-1&&s===o.array_numbers.length-1||(e++,o.array_numbers[s][i]===e&&t.push(!0));return t}get(){return this.board}}class c{constructor(t){this.relatedScene=t}create(){const t=Math.floor(this.relatedScene.sys.game.config.width/2-o.tileXY.x*o.array_numbers[0].length/2),e=Math.floor(this.relatedScene.sys.game.config.height/2-o.tileXY.y*o.array_numbers.length/2);this.boardimg=this.relatedScene.add.image(t-4,e-4,"board"),this.boardimg.setDepth(o.depth.fondo).setOrigin(0,0),console.log(this.boardimg)}get(){return this.boardimg}}class u{constructor(t,e){this.relatedScene=t,this.datos=e}create(){const{x:t,y:e,size:s,txt:i,color:a,strokeColor:r,id:n,resuelto:h}=this.datos;let l="";0===n&&(l=`${i}`),2===n&&(l=`${i}`),this.marcador=this.relatedScene.add.text(t,e,l,{fontSize:s+"px",fill:a,fontFamily:"verdana, arial, sans-serif",fontStyle:"bold"}),this.marcador.setOrigin(0,.5).setDepth(o.depth.marcadores),this.marcador.setStroke(r,16).setShadow(2,2,"#111111",2,!1,!0),console.log(this.marcador)}update(t,e){this.marcador.setText(`${t}${e}`)}get(){return this.marcador}}class g{constructor(t){this.relatedScene=t}create(t,e){const s=this.relatedScene.sound.add("moneda-mario"),i=this.relatedScene.sys.game.config.width,a=this.relatedScene.sys.game.config.height;this.boton=this.relatedScene.add.sprite(Math.floor(i/2),Math.floor(a/1.3),"boton-nueva-partida").setInteractive(),this.boton.setScale(.6).setAngle(1).setDepth(30),this.boton.on("pointerover",(()=>{this.boton.setScale(.7)})),this.boton.on("pointerout",(()=>{this.boton.setScale(.6)})),this.boton.on("pointerdown",(e=>{o.getAudio().fireWorks&&(o.getAudio().fireWorks.volume=0),l(s,!1,.7),this.relatedScene.scene.start(t)})),this.relatedScene.tweens.add({targets:this.boton,angle:359,ease:"Elastic",yoyo:!0,hold:2e3,duration:3e3,repeat:-1})}get(){return this.boton}}class m{constructor(t,e){this.relatedScene=t,this.args=e}create(){const{x:t,y:e,id:s,scX:i,scY:o,ang:a}=this.args;this.boton=this.relatedScene.add.image(t,e,s).setInteractive(),this.boton.setScale(i,o),this.boton.setAngle(a).setFrame(0).setDepth(50),this.boton.setX(t).setY(e),this.boton.on("pointerover",(()=>{this.boton.setScale(i+.1,o+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(i,o)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class p{constructor(t,e){this.relatedScene=t,this.args=e}create(){const t=this.relatedScene.sound.add("moneda-mario"),{left:e,top:s,img:i,scale:r,texto:n,id:h}=this.args;this.chooseGame=this.relatedScene.add.sprite(e,s,i).setInteractive(),this.chooseGame.setOrigin(.5,.5).setScale(r).setDepth(o.depth.textos),this.chooseGame.setData("id",h),this.txt=new a(this.relatedScene,{x:e,y:Math.floor(1.7*s),txt:n,size:45,color:"#ffa",style:"bold",stroke:h,sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.escalaTxt=3*r,this.txt.get().setScale(this.escalaTxt),this.chooseGame.on("pointerover",(()=>{this.txt.get().setScale(this.escalaTxt+.1),this.chooseGame.setScale(r+.1)})),this.chooseGame.on("pointerout",(()=>{this.txt.get().setScale(this.escalaTxt),this.chooseGame.setScale(r)})),this.chooseGame.on("pointerdown",(e=>{console.log("choose game"),l(t,!1,.7),this.relatedScene.scene.start("Game")}))}get(){return this.chooseGame}}class f extends s.Scene{constructor(){super("Game")}init(){l(o.getAudio().music,!0,.6),o.setGameOver(!1),o.array_numbers=[[o.empty,o.empty,o.empty],[o.empty,o.empty,o.empty],[o.empty,o.empty,o.empty]],this.set_pausaInicial(4300),this.boardimg=new c(this),this.board=new d(this,!1),this.instanciar_marcadores(),this.botonrejugar=new g(this)}preload(){}create(){this.imgFondo=this.add.image(0,0,"fondo1").setDepth(o.depth.fondo).setOrigin(0,0),this.imgFondo.setScale(this.sys.game.config.width/this.imgFondo.width,this.sys.game.config.height/this.imgFondo.height),this.ui.forEach((t=>t.setVisible(!0).setDepth(o.depth.ui))),this.set_sonidos(),this.boardimg.create(),this.board.create(),this.marcadorPtos.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.set_clock()}update(){this.check_puzzleDone()?(console.log("hecho"),this.add.timeline([{at:110,run:()=>{o.getAudio().music&&o.getAudio().music.pause(),this.scene.start("Congratulations")}}]).play()):this.board.update()}check_puzzleDone(){return this.board.puzzle_done.length===o.array_numbers.length*o.array_numbers[0].length-3}set_pausaInicial(t){this.pausa_inicial={duracion:t,activa:!1}}set_clock(){this.playerClock=this.add.timeline([{at:1e3,run:()=>{const t=o.getPuntos(),e=o.getRecord();o.setPuntos(t+1),this.marcadorPtos.update(o.getTxtTime(),h(t)),this.marcadorHi.update(" Hi: ",h(e))}}]),this.playerClock.repeat(-1).play()}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height,this.ui=[null,null],this.ui[0]=this.add.image(0,0,"ui-1").setScale(1.4,1).setOrigin(0,0).setVisible(!1),this.ui[1]=this.add.image(Math.floor(this.sys.game.config.width/2.4),0,"ui-1").setScale(1.4,1).setOrigin(0,0).setVisible(!1);const e=Math.floor(this.ui[0].height/2);this.marcadorPtos=new u(this,{x:30,y:e,size:40,txt:o.getTxtTime(),color:"#eee",strokeColor:"#f0bb10",id:0,resuelto:!1}),this.marcadorHi=new u(this,{x:Math.floor(t/2.2),y:e,size:40,txt:" Hi: ",color:"#eee",strokeColor:"#f0bb10",id:2}),this.botonfullscreen=new m(this,{x:Math.floor(t/1.1),y:e,id:"boton-fullscreen",scX:1.2,scY:.8,ang:0})}set_sonidos(){this.sonido_jump=this.sound.add("jump"),this.sonido_monedaMario=this.sound.add("moneda-mario")}}class y extends s.Scene{constructor(){super("PreGame")}init(){o.getAudio().music.volume=0,o.setPuntos(0),o.setNivel(1),o.setGameOver(!1);const t=this.sys.game.config.width,e=this.sys.game.config.height;this.choosegame=[],this.choosegame.push(new p(this,{left:Math.floor(t/2-t/4),top:Math.floor(e/2.1),img:"img-menu-numbers",scale:.3,texto:"   Puzzle \n Numbers ",id:"#f71"})),this.choosegame.push(new p(this,{left:Math.floor(t/2+t/4),top:Math.floor(e/2.1),img:"img-menu-jewels",scale:.3,texto:" Puzzle \n Jewels ",id:"#9f1"})),this.txt=new a(this,{x:Math.floor(t/2),y:-200,txt:"         Choose your \n challenge Puzzle-game ",size:64,color:"#ffa",style:"bold",stroke:"#f41",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}create(){this.add.image(0,0,"fondo").setDepth(o.depth.fondo).setOrigin(0,0),this.choosegame.forEach((t=>t.create())),this.txt.create(),this.tweens.add({targets:this.txt.get(),y:Math.floor(this.sys.game.config.height/8),duration:1e3})}get(){return this.txt}}class b extends s.Scene{constructor(){super("MainMenu")}init(){o.setAudioMusic(this.sound.add("music-puzzle-game")),o.setAudioFireWorks(this.sound.add("fireworks")),this.botoninicio=new g(this),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Puzzle \n     2 \n games ",size:100,color:"#ffa",style:"bold",stroke:"#f51",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/3),dura:3e3})}preload(){}create(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.add.image(0,0,"fondo").setOrigin(0,0),n(t/2,e/2,"particula1",{min:120,max:220},{min:2400,max:2800},{start:1.5,end:0},1175210,!0,null,!1,this),this.txt.create(),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("PreGame",!1)}}]).play(),l(o.getAudio().music,!0,.6),console.log(this.txt)}}class x extends s.Scene{constructor(){super("Preloader")}init(){const t=this.sys.game.config.width,e=this.sys.game.config.height;this.load.image("fondo","assets/img/bg.png"),this.add.image(0,0,"fondo").setOrigin(0,0),this.txt=new a(this,{x:Math.floor(t/2),y:Math.floor(e/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(t/2),Math.floor(e/2),Math.floor(t/1.5),Math.floor(e/12)).setStrokeStyle(1,16772744);const s=this.add.rectangle(Math.floor(t/2)-Math.floor(t/3)+4,Math.floor(e/2),4,Math.floor(e/14),16750865);this.load.on("progress",(e=>{s.width=Math.floor(t/1.52)*e}))}preload(){this.load.setPath("assets"),this.load.image("fondo","./img/bg.png");for(let t=1;t<4;t++)this.load.image(`fondo${t}`,`./img/fondo-mosaico${t}.jpg`);this.load.image("ui-1","./img/ui-1.png"),this.load.image("img-menu-numbers","./img/img-puzzle-numbers.png"),this.load.image("img-menu-jewels","./img/img-puzzle-numbers.png"),this.load.image("boton-nueva-partida","./img/boton-start.png"),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.image("particula-tint","./img/particula-tint.png"),this.load.image("particula1","./img/particula1.png"),this.load.image("tile-blue","./img/tile-blue.png"),this.load.image("board","./img/board-puzzle.png"),this.load.spritesheet("tiles-numbers","./img/ssheet-puzzle-numbers.png",{frameWidth:150,frameHeight:150}),this.load.audio("aplausos","./audio/aplausoseagle.mp3"),this.load.audio("abucheos","./audio/boooh.mp3"),this.load.audio("fireworks","./audio/fireworks.mp3"),this.load.audio("jump","./audio/jumpbros.ogg"),this.load.audio("menu-switch","./audio/menu_switch.mp3"),this.load.audio("music-puzzle-game","./audio/music-puzzle-game1.mp3"),this.load.audio("moneda-mario","./audio/p-ping.mp3")}create(){this.scene.start("MainMenu")}}class w extends Phaser.Scene{constructor(){super({key:"Congratulations"})}init(){this.boardimg=new c(this),this.board=new d(this,!0),this.instanciar_marcadores(),this.botoninicio=new g(this)}create(){this.set_sonidos(),this.add.image(0,0,"fondo").setOrigin(0,0),this.ui.forEach((t=>t.setVisible(!0).setDepth(o.depth.ui))),this.boardimg.create(),this.board.create(),this.marcadorPtos.create(),this.marcadorHi.create(),this.botonfullscreen.create(),this.txt=new a(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2.3),txt:" Congratulations! ",size:100,color:"#ffa",style:"bold",stroke:"#f71",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setDepth(o.depth.textos).setAlpha(1).setScale(.1),this.tweens.add({targets:this.txt.get(),scale:1,duration:2e3}),n(this.sys.game.config.width/2,this.sys.game.config.height/2,"particula1",{min:90,max:320},{min:5500,max:6e3},{start:0,end:1},16763921,!0,null,!1,this),this.add.timeline([{at:Math.floor(3e3),run:()=>{l(o.getAudio().fireWorks,!1,.9)}},{at:6e3,run:()=>{this.botoninicio.create("PreGame")}}]).play();const t=o.getPuntos(),e=o.getRecord();this.marcadorPtos.update(o.getTxtTime(),h(t)),this.marcadorHi.update(" Hi: ",h(e)),l(this.sonido_aplausos,!1,.9),console.log(this.txt)}update(){}instanciar_marcadores(){const t=this.sys.game.config.width;this.sys.game.config.height,this.ui=[null,null],this.ui[0]=this.add.image(0,0,"ui-1").setScale(1.4,1).setOrigin(0,0).setVisible(!1),this.ui[1]=this.add.image(Math.floor(this.sys.game.config.width/2.4),0,"ui-1").setScale(1.4,1).setOrigin(0,0).setVisible(!1);const e=Math.floor(this.ui[0].height/2);this.marcadorPtos=new u(this,{x:30,y:e,size:40,txt:o.getTxtTime(),color:"#eee",strokeColor:"#f0bb10",id:0,resuelto:!0}),this.marcadorHi=new u(this,{x:Math.floor(t/2.2),y:e,size:40,txt:" Record: ",color:"#eee",strokeColor:"#f0bb10",id:2}),this.botonfullscreen=new m(this,{x:Math.floor(t/1.1),y:e,id:"boton-fullscreen",scX:1.2,scY:.8,ang:0})}set_sonidos(){this.sonido_aplausos=this.sound.add("aplausos")}}const S={type:Phaser.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#857511",physics:{default:"arcade",arcade:{debug:!1}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[r,x,b,f,y,w]};new Phaser.Game(S);
